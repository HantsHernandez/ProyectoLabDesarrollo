<html lang="es" xmlns:th="http://www.thymeleaf.org">
<div class="bg-gray-100 min-h-screen flex items-center justify-center">
   <div th:fragment="contenido" class="bg-white p-8 rounded-lg shadow-md w-full max-w-5xl mx-auto">
      <h2   class="text-2xl font-semibold text-gray-700 mb-6 text-center"
            th:text="${empleado == null ? 'Agregar Nuevo empleado' : 'Modificar Empleado'}"></h2>

      <form th:action="@{${empleado == null ? '/guardar-empleado' : '/actualizar-empleado'}}"  method="post" id="FormEmpleado">
         <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Nombres -->
            <div>
               <label for="nombreEmpleado" class="block text-gray-600 font-semibold">Nombres</label>
               <input type="text" id="nombreEmpleado" name="empleado.nombreEmpleado"
                      th:value="${empleado != null ? empleado.nombreEmpleado : ''}"
                      class="w-full p-2 border border-gray-300 rounded mt-1" placeholder="Ingrese nombres" required>
            </div>

            <!-- Apellidos -->
            <div>
               <label for="apellidoEmpleado" class="block text-gray-600 font-semibold">Apellidos</label>
               <input type="text" id="apellidoEmpleado" name="empleado.apellidoEmpleado"
                      th:value="${empleado != null ? empleado.apellidoEmpleado : ''}"
                      class="w-full p-2 border border-gray-300 rounded mt-1" placeholder="Ingrese apellidos" required>
            </div>

            <!-- DUI -->
            <div>
               <label for="duiEmpleado" class="block text-gray-600 font-semibold">DUI</label>
               <input type="text" id="duiEmpleado" name="empleado.duiEmpleado"
                      th:value="${empleado != null ? empleado.duiEmpleado : ''}"
                      class="w-full p-2 border border-gray-300 rounded mt-1" placeholder="00000000-0" required>
            </div>

            <!-- ISSS -->
            <div>
               <label for="isssEmpleado" class="block text-gray-600 font-semibold">ISSS</label>
               <input type="text" id="isssEmpleado" name="empleado.isssEmpleado"
                      th:value="${empleado != null ? empleado.isssEmpleado : ''}"
                      class="w-full p-2 border border-gray-300 rounded mt-1" placeholder="000000000" required>
            </div>

            <!-- Fecha Nacimiento -->
            <div>
               <label for="fechaNacEmpleado" class="block text-gray-600 font-semibold">Fecha Nacimiento</label>
               <input type="date" id="fechaNacEmpleado" name="empleado.fechaNacEmpleado"
                      th:value="${empleado != null ? empleado.fechaNacEmpleado : ''}"
                      class="w-full p-2 border border-gray-300 rounded mt-1" required>
            </div>

            <!-- Teléfono -->
            <div>
               <label for="telefonoEmpleado" class="block text-gray-600 font-semibold">Teléfono</label>
               <input type="tel" id="telefonoEmpleado" name="empleado.telefonoEmpleado"
                      th:value="${empleado != null ? empleado.telefonoEmpleado : ''}"
                      class="w-full p-2 border border-gray-300 rounded mt-1" placeholder="0000-0000" required>
            </div>

            <!-- Género -->
            <div>
               <label for="generoEmpleado" class="block text-gray-600 font-semibold">Género</label>
               <select id="generoEmpleado" name="empleado.generoEmpleado" class="w-full p-2 border border-gray-300 rounded mt-1" required>
                  <option value="" disabled selected>-- Selecciona un género --</option>
                  <option value="F" th:selected="${empleado != null and empleado.generoEmpleado == 'F'}">F</option>
                  <option value="M" th:selected="${empleado != null and empleado.generoEmpleado == 'M'}">M</option>
               </select>
            </div>

            <!-- Correo -->
            <div>
               <label for="correoEmpleado" class="block text-gray-600 font-semibold">Correo</label>
               <input type="email" id="correoEmpleado" name="empleado.correoEmpleado" class="w-full p-2 border border-gray-300 rounded mt-1"
                      placeholder="Ingrese correo"  th:value="${empleado != null ? empleado.correoEmpleado : ''}" required>
            </div>

            <!-- Cargo -->
            <div>
               <label for="cargo" class="block text-gray-600 font-semibold">Cargo</label>
               <select id="cargo" name="empleado.cargo" class="w-full p-2 border border-gray-300 rounded mt-1" required>
                  <option value="" disabled selected>-- Seleccione un cargo --</option>
                  <option th:each="cargo : ${listaCargos}"
                          th:value="${cargo.idCargo}"
                          th:text="${cargo.cargo}"
                          th:selected="${empleado != null and empleado.cargo.idCargo == cargo.idCargo}"></option>
               </select>
            </div>

            <!-- Direccion  -->
            <div>
               <label for="direccion" class="block text-gray-600 font-semibold">Direccion</label>
               <input type="text" id="direccion" name="direccion.linea1" class="w-full p-2 border border-gray-300 rounded mt-1"
                      placeholder="Ingrese una imagen"  th:value="${empleado != null ? empleado.direccion.linea1 : ''}" required>
            </div>

            <!-- Imagen  -->
            <div>
               <label for="imagen" class="block text-gray-600 font-semibold mb-2">Imagen</label>

               <div>
                  <img id="previewImagen" th:src="${empleado != null && empleado.urlImagen != null ? empleado.urlImagen : '/img/imgEmpPredeterminado.jpg'}"
                       alt="Imagen actual" class="w-20 h-20 object-cover rounded-full mb-4">
               </div>

               <input type="file" id="imagen" name="imagen"
                      class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 file:bg-blue-500 file:text-white file:border-0 file:rounded file:py-2 file:px-4 hover:file:bg-blue-600"
                      accept="image/*" onchange="actualizarVistaPrevia(this)">
               <p class="mt-1 text-sm text-gray-500 dark:text-gray-300" id="file_input_help">SVG, PNG, JPG o GIF (MAX. 800x400px).</p>
            </div>



            <input type="hidden" name="empleado.idEmpleado" th:value="${empleado != null ? empleado.idEmpleado : ''}">
            <input type="hidden" name="direccion.idDireccion" th:value="${empleado != null ? empleado.direccion.idDireccion : ''}">
         </div>

         <!-- Botones para enviar y limpiar el formulario -->
         <div class="mt-6 flex justify-end space-x-4">
            <button type="button" onclick="limpiarFormulario()"
               class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
               Limpiar
            </button>
            <button type="button" onclick="guardar_registros('FormEmpleado')" th:text="${empleado != null ? 'Actualizar Empleado' : 'Agregar Empleado'}"
                    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            </button>
         </div>
      </form>
   </div>
</div>